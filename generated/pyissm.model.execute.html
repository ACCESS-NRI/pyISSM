

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pyissm.model.execute &mdash; pyissm v0.0.1.dev190126 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=9edc463e" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=d96f5a32"></script>
      <script src="../_static/doctools.js?v=fd6eb6e6"></script>
      <script src="../_static/sphinx_highlight.js?v=6ffebe34"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="pyissm.model.io" href="pyissm.model.io.html" />
    <link rel="prev" title="pyissm.model.classes.verbose" href="pyissm.model.classes.verbose.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            pyissm
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../pyissm.html">pyissm API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="pyissm.html">pyissm</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="pyissm.analysis.html">pyissm.analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyissm.data.html">pyissm.data</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyissm.learn.html">pyissm.learn</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="pyissm.model.html">pyissm.model</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="pyissm.model.html#pyissm.model.Model"><code class="docutils literal notranslate"><span class="pre">Model</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="pyissm.model.Model.html">pyissm.model.Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="pyissm.model.bc.html">pyissm.model.bc</a></li>
<li class="toctree-l4"><a class="reference internal" href="pyissm.model.classes.html">pyissm.model.classes</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">pyissm.model.execute</a></li>
<li class="toctree-l4"><a class="reference internal" href="pyissm.model.io.html">pyissm.model.io</a></li>
<li class="toctree-l4"><a class="reference internal" href="pyissm.model.mesh.html">pyissm.model.mesh</a></li>
<li class="toctree-l4"><a class="reference internal" href="pyissm.model.param.html">pyissm.model.param</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="pyissm.plot.html">pyissm.plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyissm.tools.html">pyissm.tools</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pyissm</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../pyissm.html">pyissm API Reference</a></li>
          <li class="breadcrumb-item"><a href="pyissm.html">pyissm</a></li>
          <li class="breadcrumb-item"><a href="pyissm.model.html">pyissm.model</a></li>
      <li class="breadcrumb-item active">pyissm.model.execute</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/generated/pyissm.model.execute.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-pyissm.model.execute">
<span id="pyissm-model-execute"></span><h1>pyissm.model.execute<a class="headerlink" href="#module-pyissm.model.execute" title="Link to this heading"></a></h1>
<p>ISSM execution commands to handle model marshalling and execution.</p>
<p class="rubric">Functions</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pyissm.model.execute.WriteData" title="pyissm.model.execute.WriteData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">WriteData</span></code></a>(fid, prefix, *[, obj, fieldname, ...])</p></td>
<td><p>Write model field in binary file.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pyissm.model.execute.format_to_code" title="pyissm.model.execute.format_to_code"><code class="xref py py-obj docutils literal notranslate"><span class="pre">format_to_code</span></code></a>(datatype)</p></td>
<td><p>Convert format string to integer code.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pyissm.model.execute.is_model_self_consistent" title="pyissm.model.execute.is_model_self_consistent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">is_model_self_consistent</span></code></a>(md)</p></td>
<td><p>Check that all relevant model classes in the given model are self-consistent. This function iterates over the model classes returned by md.model_class_names(), skips a small set of classes that are not subject to consistency checking ('results', 'debug', 'radaroverlay'), and invokes a consistency check on each model class that provides a check_consistency method. The routine: - Initializes md.private.isconsistent to True. - Retrieves the model solution and any associated analyses. - For each model class:     - If the class does not expose a callable <cite>check_consistency</cite> it is skipped         (a message is printed to stdout). - Otherwise, calls obj.check_consistency(md, solution, analyses). - If that call raises an exception, records a message via md.check_message         and sets md.private.isconsistent to False. - If any consistency check fails (md.private.isconsistent becomes False),     raises a RuntimeError to indicate the overall model is not consistent.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pyissm.model.execute.load_results_from_cluster" title="pyissm.model.execute.load_results_from_cluster"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_results_from_cluster</span></code></a>(md[, no_log, ...])</p></td>
<td><p>Load results from cluster after job completion.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pyissm.model.execute.load_results_from_disk" title="pyissm.model.execute.load_results_from_disk"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_results_from_disk</span></code></a>(md, filename)</p></td>
<td><p>Load simulation results from disk into a model object.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pyissm.model.execute.marshall" title="pyissm.model.execute.marshall"><code class="xref py py-obj docutils literal notranslate"><span class="pre">marshall</span></code></a>(md)</p></td>
<td><p>Marshall the model data for execution.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pyissm.model.execute.parse_results_from_disk" title="pyissm.model.execute.parse_results_from_disk"><code class="xref py py-obj docutils literal notranslate"><span class="pre">parse_results_from_disk</span></code></a>(md, filename)</p></td>
<td><p>Parse and load results from an ISSM binary file.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pyissm.model.execute.postprocess_qmu" title="pyissm.model.execute.postprocess_qmu"><code class="xref py py-obj docutils literal notranslate"><span class="pre">postprocess_qmu</span></code></a>(md)</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pyissm.model.execute.preprocess_qmu" title="pyissm.model.execute.preprocess_qmu"><code class="xref py py-obj docutils literal notranslate"><span class="pre">preprocess_qmu</span></code></a>(md)</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pyissm.model.execute.solve" title="pyissm.model.execute.solve"><code class="xref py py-obj docutils literal notranslate"><span class="pre">solve</span></code></a>(md, solution_string[, batch, ...])</p></td>
<td><p>Solve an ISSM model with the specified solution type.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pyissm.model.execute.wait_on_lock" title="pyissm.model.execute.wait_on_lock"><code class="xref py py-obj docutils literal notranslate"><span class="pre">wait_on_lock</span></code></a>(md)</p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt class="sig sig-object py" id="pyissm.model.execute.WriteData">
<span class="sig-prename descclassname"><span class="pre">pyissm.model.execute.</span></span><span class="sig-name descname"><span class="pre">WriteData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fieldname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mattype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeserieslength</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">yts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyissm.model.execute.WriteData" title="Link to this definition"></a></dt>
<dd><p>Write model field in binary file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fid</strong> (<em>file object</em>) – File identifier for binary output file.</p></li>
<li><p><strong>prefix</strong> (<a class="reference internal" href="pyissm.model.classes.initialization.html#pyissm.model.classes.initialization.str" title="pyissm.model.classes.initialization.str"><em>str</em></a>) – Prefix string for field naming.</p></li>
<li><p><strong>obj</strong> (<em>object</em><em>, </em><em>optional</em>) – Object containing the field to write. If provided, fieldname must also be specified.</p></li>
<li><p><strong>fieldname</strong> (<a class="reference internal" href="pyissm.model.classes.initialization.html#pyissm.model.classes.initialization.str" title="pyissm.model.classes.initialization.str"><em>str</em></a><em>, </em><em>optional</em>) – Name of the field attribute in obj. Required when obj is provided.</p></li>
<li><p><strong>data</strong> (<em>array_like</em><em>, </em><em>optional</em>) – Data to write directly. Required when obj is not provided.</p></li>
<li><p><strong>name</strong> (<a class="reference internal" href="pyissm.model.classes.initialization.html#pyissm.model.classes.initialization.str" title="pyissm.model.classes.initialization.str"><em>str</em></a><em>, </em><em>optional</em>) – Custom name for the field. If not provided, defaults to “{prefix}.{fieldname}”
when using obj, or must be specified when using data directly.</p></li>
<li><p><strong>format</strong> (<a class="reference internal" href="pyissm.model.classes.initialization.html#pyissm.model.classes.initialization.str" title="pyissm.model.classes.initialization.str"><em>str</em></a>) – Data format specification for binary writing. Required parameter.</p></li>
<li><p><strong>mattype</strong> (<em>int</em><em>, </em><em>optional</em>) – Matrix type identifier, by default 0.</p></li>
<li><p><strong>timeserieslength</strong> (<em>int</em><em>, </em><em>optional</em>) – Length of time series data, by default -1.</p></li>
<li><p><strong>scale</strong> (<em>float</em><em>, </em><em>optional</em>) – Scaling factor to apply to data before writing, by default None.</p></li>
<li><p><strong>yts</strong> (<em>float</em><em>, </em><em>optional</em>) – Years to seconds conversion factor, by default None.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If format is not provided.
    If obj is provided but fieldname is missing.
    If neither obj+fieldname nor data is provided.
    If data is provided directly but name is missing.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The function validates input parameters, extracts data from either an object
attribute or direct data input, applies optional scaling and time series
transformations, and writes the field to a binary file with appropriate
formatting.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyissm.model.execute.format_to_code">
<span class="sig-prename descclassname"><span class="pre">pyissm.model.execute.</span></span><span class="sig-name descname"><span class="pre">format_to_code</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">datatype</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyissm.model.execute.format_to_code" title="Link to this definition"></a></dt>
<dd><p>Convert format string to integer code.</p>
<p>This function maps data type strings to their corresponding integer codes
used for data serialization and format identification.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>datatype</strong> (<a class="reference internal" href="pyissm.model.classes.initialization.html#pyissm.model.classes.initialization.str" title="pyissm.model.classes.initialization.str"><em>str</em></a>) – The data type string to convert. Supported types are:
‘Boolean’, ‘Integer’, ‘Double’, ‘String’, ‘BooleanMat’,
‘IntMat’, ‘DoubleMat’, ‘MatArray’, ‘StringArray’, ‘CompressedMat’.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The integer code corresponding to the input data type.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>IOError</strong> – If the provided datatype is not supported.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">format_to_code</span><span class="p">(</span><span class="s1">&#39;Double&#39;</span><span class="p">)</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">format_to_code</span><span class="p">(</span><span class="s1">&#39;StringArray&#39;</span><span class="p">)</span>
<span class="go">9</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyissm.model.execute.is_model_self_consistent">
<span class="sig-prename descclassname"><span class="pre">pyissm.model.execute.</span></span><span class="sig-name descname"><span class="pre">is_model_self_consistent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">md</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyissm.model.execute.is_model_self_consistent" title="Link to this definition"></a></dt>
<dd><p>Check that all relevant model classes in the given model are self-consistent.
This function iterates over the model classes returned by md.model_class_names(),
skips a small set of classes that are not subject to consistency checking
(‘results’, ‘debug’, ‘radaroverlay’), and invokes a consistency check on each
model class that provides a check_consistency method. The routine:
- Initializes md.private.isconsistent to True.
- Retrieves the model solution and any associated analyses.
- For each model class:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>If the class does not expose a callable <cite>check_consistency</cite> it is skipped</dt><dd><p>(a message is printed to stdout).</p>
</dd>
</dl>
</li>
<li><p>Otherwise, calls obj.check_consistency(md, solution, analyses).</p></li>
<li><dl class="simple">
<dt>If that call raises an exception, records a message via md.check_message</dt><dd><p>and sets md.private.isconsistent to False.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><dl class="simple">
<dt>If any consistency check fails (md.private.isconsistent becomes False),</dt><dd><p>raises a RuntimeError to indicate the overall model is not consistent.</p>
</dd>
</dl>
</li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>md</strong> (<em>object</em>) – <p>The model object to validate. The object is expected to provide:
- md.private, an attribute with at least <cite>isconsistent</cite> (bool) and</p>
<blockquote>
<div><p><cite>solution</cite> attributes;</p>
</div></blockquote>
<ul class="simple">
<li><dl class="simple">
<dt>md.model_class_names(), a callable that returns an iterable of model</dt><dd><p>class name strings;</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>for each name returned by md.model_class_names(), an attribute on <cite>md</cite></dt><dd><p>with that name, representing the model class object;</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>md.check_message(msg: str), a callable used to record consistency</dt><dd><p>failure messages.</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>This function performs in-place updates to <cite>md</cite> (notably
md.private.isconsistent) and does not return a value.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>RuntimeError</strong> – If any per-class consistency check fails. In that case, md.private.isconsistent
    will be set to False and a RuntimeError is raised after the failing check(s)
    so callers are made aware that the model is not consistent.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>Classes named ‘results’, ‘debug’, and ‘radaroverlay’ are intentionally skipped.</p></li>
<li><dl class="simple">
<dt>If a model class does not provide a callable <cite>check_consistency</cite> attribute,</dt><dd><p>a message will be printed to stdout and the class will be skipped.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Consistency checks are expected to follow the signature:</dt><dd><p>check_consistency(md, solution, analyses). Any exception raised by a
check_consistency implementation will be caught, recorded via
md.check_message, and treated as a failure.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>This function mutates md.private.isconsistent; callers can inspect that value</dt><dd><p>to determine consistency state prior to handling the RuntimeError.</p>
</dd>
</dl>
</li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyissm.model.execute.load_results_from_cluster">
<span class="sig-prename descclassname"><span class="pre">pyissm.model.execute.</span></span><span class="sig-name descname"><span class="pre">load_results_from_cluster</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">md</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_log</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">runtime_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyissm.model.execute.load_results_from_cluster" title="Link to this definition"></a></dt>
<dd><p>Load results from cluster after job completion.</p>
<p>Downloads output files from a remote cluster, loads the results into the model,
and cleans up temporary files. Handles both standard ISSM runs and Dakota
uncertainty quantification runs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>md</strong> (<em>model</em>) – ISSM model object containing cluster configuration and run parameters.</p></li>
<li><p><strong>no_log</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, skip downloading log files (.outlog and .errlog).
Default is False.</p></li>
<li><p><strong>runtime_name</strong> (<a class="reference internal" href="pyissm.model.classes.initialization.html#pyissm.model.classes.initialization.str" title="pyissm.model.classes.initialization.str"><em>str</em></a><em>, </em><em>optional</em>) – Name of the runtime directory on the cluster. If None, uses
md.private.runtimename. Default is None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Updated model object with loaded results from the cluster run.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>model</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>This function performs the following operations:
1. Downloads output files from the cluster including:
- Log files (.outlog, .errlog) unless no_log=True
- Binary output files (.outbin or multiple files for Dakota sampling)
- Dakota-specific files (qmu.err, qmu.out, dakota_tabular.dat, .stats)
2. Loads results from the binary output file into the model object
3. Cleans up downloaded files and removes temporary files
4. If run on the same platform as the cluster, removes input files
(.bin, .toolkits, qmu.in, .queue/.bat)
The function handles different file patterns depending on whether Dakota
uncertainty quantification is used and what type of Dakota method is employed.
Warnings are issued if expected files are not found during cleanup.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyissm.model.execute.load_results_from_disk">
<span class="sig-prename descclassname"><span class="pre">pyissm.model.execute.</span></span><span class="sig-name descname"><span class="pre">load_results_from_disk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">md</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyissm.model.execute.load_results_from_disk" title="Link to this definition"></a></dt>
<dd><p>Load simulation results from disk into a model object.</p>
<p>This function loads results from a binary file or processes QMU (Quantification
of Margins and Uncertainties) results depending on the model configuration.
It handles result parsing, error checking, log file reading, and result
organization within the model structure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>md</strong> (<em>object</em>) – Model object containing simulation parameters, results structure, and
configuration settings. Must have attributes like <cite>qmu</cite>, <cite>results</cite>,
<cite>miscellaneous</cite>, and <cite>private</cite>.</p></li>
<li><p><strong>filename</strong> (<a class="reference internal" href="pyissm.model.classes.initialization.html#pyissm.model.classes.initialization.str" title="pyissm.model.classes.initialization.str"><em>str</em></a>) – Path to the binary file containing simulation results to be loaded.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The modified model object with results loaded into the <cite>md.results</cite>
attribute and solution type set in <cite>md.private.solution</cite>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>object</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If no results are found in the specified file.</p>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<dl class="simple">
<dt>UserWarning</dt><dd><ul class="simple">
<li><p>If SolutionType field cannot be found in results</p></li>
<li><p>If errors are detected in the error log during solution</p></li>
</ul>
</dd>
</dl>
</div>
<p class="rubric">Notes</p>
<p>The function performs different operations based on whether QMU is enabled:
- <strong>Non-QMU mode</strong>: Parses binary results, loads error/output logs, and</p>
<blockquote>
<div><p>organizes results by solution type</p>
</div></blockquote>
<ul class="simple">
<li><p><strong>QMU mode</strong>: Delegates to QMU-specific postprocessing</p></li>
</ul>
<p>For non-QMU results, the function:
1. Verifies the result file exists
2. Initializes the results structure if needed
3. Parses results and determines solution type
4. Loads associated log files (.errlog and .outlog)
5. Extracts single solutions from lists for user convenience
Log files are read as lists of strings with newlines removed. If no log
files exist, empty strings are assigned to the respective log attributes.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">md</span> <span class="o">=</span> <span class="n">load_results_from_disk</span><span class="p">(</span><span class="n">md</span><span class="p">,</span> <span class="s1">&#39;simulation_results.bin&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">md</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">StressbalanceSolution</span><span class="o">.</span><span class="n">Vel</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyissm.model.execute.marshall">
<span class="sig-prename descclassname"><span class="pre">pyissm.model.execute.</span></span><span class="sig-name descname"><span class="pre">marshall</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">md</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyissm.model.execute.marshall" title="Link to this definition"></a></dt>
<dd><p>Marshall the model data for execution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>md</strong> (<em>object</em>) – The model data object to be marshalled. Must contain miscellaneous.name
attribute and model classes with marshall_class methods.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>IOError</strong> – If the binary output file cannot be opened or closed.</p></li>
<li><p><strong>RuntimeError</strong> – If an error occurs while marshalling a model class.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>This function iterates through all model classes in the md object and
calls their marshall_class methods to serialize the data to a binary file.
Certain classes (‘results’, ‘radaroverlay’, ‘toolkits’, ‘cluster’, ‘private’)
are skipped during marshalling. The function writes an EOF marker at the
end of the file to ensure data integrity.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyissm.model.execute.parse_results_from_disk">
<span class="sig-prename descclassname"><span class="pre">pyissm.model.execute.</span></span><span class="sig-name descname"><span class="pre">parse_results_from_disk</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">md</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyissm.model.execute.parse_results_from_disk" title="Link to this definition"></a></dt>
<dd><p>Parse and load results from an ISSM binary file.</p>
<p>This function reads an ISSM binary results file and organizes all fields by
solution step. It handles sequential reading of field records, groups them
by time step, and returns a structured results object containing all solution
data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>md</strong> (<em>object</em>) – Model data structure containing simulation parameters and configuration.
Must have a <cite>constants</cite> attribute with <cite>yts</cite> (years to seconds conversion).</p></li>
<li><p><strong>filename</strong> (<a class="reference internal" href="pyissm.model.classes.initialization.html#pyissm.model.classes.initialization.str" title="pyissm.model.classes.initialization.str"><em>str</em></a>) – Path to the binary results file to be parsed.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Structured results object containing all solution steps. Each step
contains the fields and metadata for that particular solution time.
Fields are organized as attributes accessible via dot notation.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="pyissm.model.classes.results.html#pyissm.model.classes.results.solution" title="pyissm.model.classes.results.solution">model.classes.results.solution</a></p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>IOError</strong> – If the specified results file cannot be opened for reading.</p></li>
<li><p><strong>Exception</strong> – If no results are found in the binary file or if there are issues
    reading the binary data format.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The function performs the following operations:
1. Opens and sequentially reads all field records from the binary file
2. Extracts unique solution steps and organizes fields by step
3. Applies unit conversions and data formatting (e.g., flattening column vectors)
4. Returns a results object with fields accessible by step index</p>
<p>The binary file format is expected to contain field records with names,
time stamps, step numbers, and data arrays in ISSM-specific format.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyissm.model.execute.postprocess_qmu">
<span class="sig-prename descclassname"><span class="pre">pyissm.model.execute.</span></span><span class="sig-name descname"><span class="pre">postprocess_qmu</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">md</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyissm.model.execute.postprocess_qmu" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyissm.model.execute.preprocess_qmu">
<span class="sig-prename descclassname"><span class="pre">pyissm.model.execute.</span></span><span class="sig-name descname"><span class="pre">preprocess_qmu</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">md</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyissm.model.execute.preprocess_qmu" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyissm.model.execute.solve">
<span class="sig-prename descclassname"><span class="pre">pyissm.model.execute.</span></span><span class="sig-name descname"><span class="pre">solve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">md</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">solution_string</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_consistency</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">restart</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">load_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_log</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">runtime_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyissm.model.execute.solve" title="Link to this definition"></a></dt>
<dd><p>Solve an ISSM model with the specified solution type.</p>
<p>This function configures and executes a solution for an ISSM Model.
It maps solution strings to their corresponding solution classes, performs model
consistency checks, and manages runtime naming conventions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>md</strong> (<em>object</em>) – Model data structure containing the ISSM model configuration.</p></li>
<li><p><strong>solution_string</strong> (<a class="reference internal" href="pyissm.model.classes.initialization.html#pyissm.model.classes.initialization.str" title="pyissm.model.classes.initialization.str"><em>str</em></a>) – String identifier for the solution type. Supported values include:
- ‘sb’, ‘stressbalance’ : Stress balance solution
- ‘mt’, ‘masstransport’ : Mass transport solution
- ‘oceant’, ‘oceantransport’ : Ocean transport solution
- ‘th’, ‘thermal’ : Thermal solution
- ‘st’, ‘steadystate’ : Steady state solution
- ‘tr’, ‘transient’ : Transient solution
- ‘mc’, ‘balancethickness’ : Balance thickness solution
- ‘mcsoft’ : Balance thickness soft solution
- ‘bv’, ‘balancevelocity’ : Balance velocity solution
- ‘bsl’, ‘bedslope’ : Bed slope solution
- ‘ssl’, ‘surfaceslope’ : Surface slope solution
- ‘hy’, ‘hydrology’ : Hydrology solution
- ‘da’, ‘damageevolution’ : Damage evolution solution
- ‘gia’ : GIA solution
- ‘lv’, ‘love’ : Love solution
- ‘esa’ : ESA solution
- ‘smp’, ‘sampling’ : Sampling solution</p></li>
<li><p><strong>batch</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to run in batch mode, by default False.</p></li>
<li><p><strong>check_consistency</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to perform model consistency checks before solving, by default True.</p></li>
<li><p><strong>restart</strong> (<a class="reference internal" href="pyissm.model.classes.initialization.html#pyissm.model.classes.initialization.str" title="pyissm.model.classes.initialization.str"><em>str</em></a><em>, </em><em>optional</em>) – Directory name (relative to execution directory) where restart file is located, by default None.</p></li>
<li><p><strong>load_only</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to only load the solution without executing, by default False.</p></li>
<li><p><strong>no_log</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to suppress loading logs, by default False.</p></li>
<li><p><strong>runtime_name</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to generate a unique runtime name based on timestamp and process ID,
by default True. If False, uses md.miscellaneous.name as runtime name.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the provided solution_string is not recognized or supported.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The function modifies the model structure in-place by setting the solution type
and runtime name. When runtime_name is True, a unique identifier is generated
using the current timestamp and process ID to avoid clobbering existing runs.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">solve</span><span class="p">(</span><span class="n">md</span><span class="p">,</span> <span class="s1">&#39;stressbalance&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">solve</span><span class="p">(</span><span class="n">md</span><span class="p">,</span> <span class="s1">&#39;transient&#39;</span><span class="p">,</span> <span class="n">check_consistency</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">solve</span><span class="p">(</span><span class="n">md</span><span class="p">,</span> <span class="s1">&#39;thermal&#39;</span><span class="p">,</span> <span class="n">runtime_name</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyissm.model.execute.wait_on_lock">
<span class="sig-prename descclassname"><span class="pre">pyissm.model.execute.</span></span><span class="sig-name descname"><span class="pre">wait_on_lock</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">md</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyissm.model.execute.wait_on_lock" title="Link to this definition"></a></dt>
<dd></dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="pyissm.model.classes.verbose.html" class="btn btn-neutral float-left" title="pyissm.model.classes.verbose" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="pyissm.model.io.html" class="btn btn-neutral float-right" title="pyissm.model.io" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2026, ACCESS-NRI.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>


<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pyissm.model.classes.class_registry &mdash; pyissm v0.0.1.dev190126 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=9edc463e" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=d96f5a32"></script>
      <script src="../_static/doctools.js?v=fd6eb6e6"></script>
      <script src="../_static/sphinx_highlight.js?v=6ffebe34"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="pyissm.model.classes.class_utils" href="pyissm.model.classes.class_utils.html" />
    <link rel="prev" title="pyissm.model.classes.calving" href="pyissm.model.classes.calving.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            pyissm
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../pyissm.html">pyissm API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="pyissm.html">pyissm</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="pyissm.analysis.html">pyissm.analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyissm.data.html">pyissm.data</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyissm.learn.html">pyissm.learn</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="pyissm.model.html">pyissm.model</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="pyissm.model.html#pyissm.model.Model"><code class="docutils literal notranslate"><span class="pre">Model</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="pyissm.model.Model.html">pyissm.model.Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="pyissm.model.bc.html">pyissm.model.bc</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="pyissm.model.classes.html">pyissm.model.classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="pyissm.model.execute.html">pyissm.model.execute</a></li>
<li class="toctree-l4"><a class="reference internal" href="pyissm.model.io.html">pyissm.model.io</a></li>
<li class="toctree-l4"><a class="reference internal" href="pyissm.model.mesh.html">pyissm.model.mesh</a></li>
<li class="toctree-l4"><a class="reference internal" href="pyissm.model.param.html">pyissm.model.param</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="pyissm.plot.html">pyissm.plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyissm.tools.html">pyissm.tools</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pyissm</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../pyissm.html">pyissm API Reference</a></li>
          <li class="breadcrumb-item"><a href="pyissm.html">pyissm</a></li>
          <li class="breadcrumb-item"><a href="pyissm.model.html">pyissm.model</a></li>
          <li class="breadcrumb-item"><a href="pyissm.model.classes.html">pyissm.model.classes</a></li>
      <li class="breadcrumb-item active">pyissm.model.classes.class_registry</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/generated/pyissm.model.classes.class_registry.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-pyissm.model.classes.class_registry">
<span id="pyissm-model-classes-class-registry"></span><h1>pyissm.model.classes.class_registry<a class="headerlink" href="#module-pyissm.model.classes.class_registry" title="Link to this heading"></a></h1>
<p class="rubric">Functions</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pyissm.model.classes.class_registry.create_instance" title="pyissm.model.classes.class_registry.create_instance"><code class="xref py py-obj docutils literal notranslate"><span class="pre">create_instance</span></code></a>(classtype)</p></td>
<td><p>Create an instance of a registered class by its type string.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pyissm.model.classes.class_registry.map_classtype" title="pyissm.model.classes.class_registry.map_classtype"><code class="xref py py-obj docutils literal notranslate"><span class="pre">map_classtype</span></code></a>(classtype)</p></td>
<td><p>Map legacy class types to modern hierarchical class names for backwards compatibility.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pyissm.model.classes.class_registry.register_class" title="pyissm.model.classes.class_registry.register_class"><code class="xref py py-obj docutils literal notranslate"><span class="pre">register_class</span></code></a>(cls)</p></td>
<td><p>Register a class in the global class registry for ISSM classes system.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Classes</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pyissm.model.classes.class_registry.manage_state" title="pyissm.model.classes.class_registry.manage_state"><code class="xref py py-obj docutils literal notranslate"><span class="pre">manage_state</span></code></a>([other])</p></td>
<td><p>Base class providing state management and inheritance capabilities for ISSM classes.</p></td>
</tr>
</tbody>
</table>
<dl class="py function">
<dt class="sig sig-object py" id="pyissm.model.classes.class_registry.create_instance">
<span class="sig-prename descclassname"><span class="pre">pyissm.model.classes.class_registry.</span></span><span class="sig-name descname"><span class="pre">create_instance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">classtype</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyissm.model.classes.class_registry.create_instance" title="Link to this definition"></a></dt>
<dd><p>Create an instance of a registered class by its type string.</p>
<p>This function looks up a class in the CLASS_REGISTRY using the provided
classtype string and instantiates it. It handles legacy class name mapping
and provides error handling for unknown class types.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>classtype</strong> (<a class="reference internal" href="pyissm.model.classes.initialization.html#pyissm.model.classes.initialization.str" title="pyissm.model.classes.initialization.str"><em>str</em></a>) – The class type string identifying which class to instantiate.
Can be either legacy or modern naming convention.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An instance of the requested class, or None if the class type is unknown.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>object or None</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The function performs the following steps:
1. Maps legacy class types to modern equivalents using map_classtype()
2. Looks up the class in CLASS_REGISTRY
3. Instantiates the class with no arguments
4. Returns None (with warning) if class type is unknown</p>
<p>This is the primary interface for dynamic class instantiation in the
ISSM classes system, used for loading saved models and creating class instances
from string identifiers.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">create_instance</span><span class="p">(</span><span class="s1">&#39;smb.default&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span>
<span class="go">&#39;default&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">create_instance</span><span class="p">(</span><span class="s1">&#39;unknown.class&#39;</span><span class="p">)</span>
<span class="go">⚠️ Unknown classtype unknown.class. Skipping...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pyissm.model.classes.class_registry.manage_state">
<span class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></span><span class="sig-prename descclassname"><span class="pre">pyissm.model.classes.class_registry.</span></span><span class="sig-name descname"><span class="pre">manage_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyissm.model.classes.class_registry.manage_state" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Base class providing state management and inheritance capabilities for ISSM classes.</p>
<p>This class serves as the foundation for all ISSM classes, providing
automatic field inheritance, state serialization for save/load operations,
and field comparison utilities. It enables the “other” parameter pattern
used throughout ISSM for class initialization and configuration inheritance.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pyissm.model.classes.class_registry.manage_state.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyissm.model.classes.class_registry.manage_state.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize the instance, optionally inheriting fields from another instance.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyissm.model.classes.class_registry.manage_state._fields_equal">
<span class="sig-name descname"><span class="pre">_fields_equal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyissm.model.classes.class_registry.manage_state._fields_equal" title="Link to this definition"></a></dt>
<dd><p>Compare two fields for equality, handling special cases like NaN and arrays.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyissm.model.classes.class_registry.manage_state.__getstate__">
<span class="sig-name descname"><span class="pre">__getstate__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyissm.model.classes.class_registry.manage_state.__getstate__" title="Link to this definition"></a></dt>
<dd><p>Get the current state for serialization (pickle support).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pyissm.model.classes.class_registry.manage_state.__setstate__">
<span class="sig-name descname"><span class="pre">__setstate__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyissm.model.classes.class_registry.manage_state.__setstate__" title="Link to this definition"></a></dt>
<dd><p>Set the state from serialization (pickle support).</p>
</dd></dl>

<p class="rubric">Notes</p>
<p>The inheritance mechanism works by:
1. Comparing each attribute of the current instance with the “other” instance
2. If the attribute exists in both and the values differ, the “other” value is used
3. This allows default values to be overridden selectively</p>
<p>Field equality comparison handles:
- NaN values (considered equal to other NaN values)
- NumPy arrays (using np.array_equal)
- Regular Python objects (using == operator)</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">Example</span><span class="p">(</span><span class="n">manage_state</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">value1</span> <span class="o">=</span> <span class="mi">10</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">value2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gp">... </span>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">base</span> <span class="o">=</span> <span class="n">Example</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">base</span><span class="o">.</span><span class="n">value1</span> <span class="o">=</span> <span class="mi">20</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inherited</span> <span class="o">=</span> <span class="n">Example</span><span class="p">(</span><span class="n">other</span><span class="o">=</span><span class="n">base</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inherited</span><span class="o">.</span><span class="n">value1</span>
<span class="go">20</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyissm.model.classes.class_registry.map_classtype">
<span class="sig-prename descclassname"><span class="pre">pyissm.model.classes.class_registry.</span></span><span class="sig-name descname"><span class="pre">map_classtype</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">classtype</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyissm.model.classes.class_registry.map_classtype" title="Link to this definition"></a></dt>
<dd><p>Map legacy class types to modern hierarchical class names for backwards compatibility.</p>
<p>This function provides a mapping from old ISSM class naming conventions to the
new modular naming scheme. It ensures that legacy code and data files can still
work with the updated class structure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>classtype</strong> (<a class="reference internal" href="pyissm.model.classes.initialization.html#pyissm.model.classes.initialization.str" title="pyissm.model.classes.initialization.str"><em>str</em></a>) – The legacy class type string to be mapped.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The modern class type string, or the original if no mapping exists.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="pyissm.model.classes.initialization.html#pyissm.model.classes.initialization.str" title="pyissm.model.classes.initialization.str">str</a></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The mapping covers major ISSM component categories:
- basalforcings: Various basal forcing models (default, pico, linear, etc.)
- calving: Ice calving models (default, crevassedepth, levermann, etc.)
- friction: Basal friction laws (default, coulomb, weertman, etc.)
- smb: Surface mass balance models (default, arma, pdd, etc.)
- hydrology: Subglacial hydrology models (glads, shreve, pism, etc.)
- And many more…</p>
<p>When a legacy class type is mapped, an informational message is printed.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">map_classtype</span><span class="p">(</span><span class="s1">&#39;SMBforcing.SMBforcing&#39;</span><span class="p">)</span>
<span class="go">&#39;ℹ️ Legacy classtype &#39;SMBforcing.SMBforcing&#39; mapped to &#39;smb.default&#39;&#39;</span>
<span class="go">&#39;smb.default&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">map_classtype</span><span class="p">(</span><span class="s1">&#39;friction.weertman&#39;</span><span class="p">)</span>  <span class="c1"># Already modern</span>
<span class="go">&#39;friction.weertman&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pyissm.model.classes.class_registry.register_class">
<span class="sig-prename descclassname"><span class="pre">pyissm.model.classes.class_registry.</span></span><span class="sig-name descname"><span class="pre">register_class</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyissm.model.classes.class_registry.register_class" title="Link to this definition"></a></dt>
<dd><p>Register a class in the global class registry for ISSM classes system.</p>
<p>This decorator function automatically registers classes in the global CLASS_REGISTRY
dictionary using a hierarchical naming scheme based on the module structure.
It extracts the module path and creates a key for dynamic class instantiation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>cls</strong> (<a class="reference internal" href="pyissm.model.classes.independent.html#pyissm.model.classes.independent.type" title="pyissm.model.classes.independent.type"><em>type</em></a>) – The class to be registered in the registry.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The same class that was passed in (decorator pattern).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="pyissm.model.classes.independent.html#pyissm.model.classes.independent.type" title="pyissm.model.classes.independent.type">type</a></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The registration key is constructed as:
- If ‘classes’ is in the module path: uses parts after ‘classes’ + class name
- Otherwise: uses last 2 module parts + class name</p>
<p>Example module path: pyissm.model.classes.smb -&gt; key: “smb.default” (for class ‘default’)</p>
<p class="rubric">Examples</p>
<p>&#64;register_class
class default(manage_state):</p>
<blockquote>
<div><p>pass</p>
</div></blockquote>
<p># Registers as ‘smb.default’ if in pyissm.model.classes.smb module</p>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="pyissm.model.classes.calving.html" class="btn btn-neutral float-left" title="pyissm.model.classes.calving" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="pyissm.model.classes.class_utils.html" class="btn btn-neutral float-right" title="pyissm.model.classes.class_utils" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2026, ACCESS-NRI.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>